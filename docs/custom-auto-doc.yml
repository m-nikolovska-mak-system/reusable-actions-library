---

# ğŸ“ Auto-Generate Workflow Documentation â€” Reusable Workflow

**File:** [`.github/workflows/custom-auto-doc.yml`](https://github.com/m-nikolovska-mak-system/reusable-actions-library/blob/main/.github/workflows/custom-auto-doc.yml)
Reusable workflow that detects changed workflow files and automatically generates or updates their corresponding documentation in `docs/README-<workflow>.md`.

---

## ğŸ¯ What This Does

This workflow keeps your workflow documentation always up to date by:

* Detecting which workflow files were modified
* Creating documentation pages if they donâ€™t already exist
* Running a Python script to generate or update README content
* Opening an automated pull request with the updated documentation

**What you give it:**

* A Markdown template
* A Python generator script
* (Optionally) a custom branch prefix
* A GitHub token with write permissions

**What you get back:**

* ğŸ“„ Newly created or updated workflow documentation
* ğŸ” Automatic pull requests containing the updates

---

## ğŸ“¥ Inputs (What You Customize)

| Input           | Type   | Required? | Purpose                                                | Example                             |
| --------------- | ------ | --------- | ------------------------------------------------------ | ----------------------------------- |
| `template_path` | string | âœ… YES     | Path to the README template used when generating pages | `.github/docs/workflow-template.md` |
| `python_script` | string | âœ… YES     | Script that reads workflow YAML and outputs Markdown   | `.github/scripts/generate-docs.py`  |
| `branch_prefix` | string | âŒ No      | Prefix for auto-generated PR branches                  | `auto-doc/update-readme`            |

---

## ğŸ”’ Secrets (Required)

| Secret       | What It Is                                                   |
| ------------ | ------------------------------------------------------------ |
| `USER_TOKEN` | GitHub token with permissions to push changes and create PRs |

---

## ğŸ§  How It Works

1. Detects changed workflow files (`*.yml` / `*.yaml`)
2. Builds a job matrix for each changed file
3. Creates missing README files from your template
4. Updates or rebuilds documentation using your Python script
5. Opens a pull request for every README that changed

All fully automated.

---

## ğŸ’¡ Usage Example

```yaml
jobs:
  generate_docs:
    uses: m-nikolovska-mak-system/reusable-actions-library/.github/workflows/custom-auto-doc.yml@main
    with:
      template_path: .github/docs/workflow-template.md
      python_script: .github/scripts/generate-docs.py
      branch_prefix: auto-doc/update-readme
    secrets:
      USER_TOKEN: ${{ secrets.USER_TOKEN }}
```

---

